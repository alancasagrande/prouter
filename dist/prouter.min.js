!function(t,e){"function"==typeof define&&define.amd?define(e):"object"==typeof exports?module.exports=e(require,exports,module):t.prouter=e()}(this,function(t,e,r){var n;return function(t){var e="object"==typeof self&&self.self===self&&self||"object"==typeof global&&global.global===global&&global,r={mode:"hash",root:"/"},n=new RegExp(["(\\\\.)","([\\/.])?(?:(?:\\:(\\w+)(?:\\(((?:\\\\.|[^()])+)\\))?|\\(((?:\\\\.|[^()])+)\\))([+*?])?|(\\*))"].join("|"),"g"),o=function(){function t(){}return t._escapeString=function(t){return t.replace(/([.+*?=^!:${}()[\]|\/])/g,"\\$1")},t._escapeGroup=function(t){return t.replace(/([=!:$\/()])/g,"\\$1")},t.clearSlashes=function(t){return t.replace(/\/$/,"").replace(/^\//,"")},t._flags=function(t){return t.sensitive?"":"i"},t._parse=function(e){for(var r,o=[],a=0,s=0,i="";r=n.exec(e);){var h=r[0],l=r[1],u=r.index;if(i+=e.slice(s,u),s=u+h.length,l)i+=l[1];else{i&&(o.push(i),i="");var c=r[2],p=r[3],f=r[4],d=r[5],g=r[6],v=r[7],_="+"===g||"*"===g,m="?"===g||"*"===g,y=c||"/",x=f||d||(v?".*":"[^"+y+"]+?");o.push({name:p||(a++).toString(),prefix:c||"",delimiter:y,optional:m,repeat:_,pattern:t._escapeGroup(x)})}}return s<e.length&&(i+=e.substr(s)),i&&o.push(i),o},t._tokensToPathExp=function(e,r){void 0===r&&(r={});for(var n=r.strict,o=r.end!==!1,a="",s=e[e.length-1],i="string"==typeof s&&s.length&&"/"===s.charAt(s.length-1),h=0;h<e.length;h++){var l=e[h];if("string"==typeof l)a+=t._escapeString(l);else{var u=t._escapeString(l.prefix),c=l.pattern;l.repeat&&(c+="(?:"+u+c+")*"),c=l.optional?u?"(?:"+u+"("+c+"))?":"("+c+")?":u+"("+c+")",a+=c}}return n||(a=(i?a.slice(0,-2):a)+"(?:\\/(?=$))?"),a+=o?"$":n&&i?"":"(?=\\/|$)",new RegExp("^"+a,t._flags(r))},t.parseSearchString=function(t){var e={};"?"===t.charAt(0)&&(t=t.slice(1));for(var r=t.split("&"),n=0;n<r.length;n++){var o=r[n].split("=");e[decodeURIComponent(o[0])]=decodeURIComponent(o[1])}return e},t.parsePath=function(r){var n;"function"==typeof e.URL?n=new e.URL(r,"http://example.com"):(n=document.createElement("a"),n.href="http://example.com/"+r);var o={path:t.clearSlashes(n.pathname),query:t.parseSearchString(n.search),queryString:n.search};return o},t.extractRequest=function(r,n){var o=t.parsePath(r);o.params={};var a=n.exec(o.path);if(!a)return o;for(var s=a.slice(1),i=n.keys,h=0;h<s.length;h++)void 0!==s[h]&&(o.params[i[h].name]=e.decodeURIComponent(s[h]));return o},t.stringToPathExp=function(e,r){for(var n=t._parse(e),o=t._tokensToPathExp(n,r),a=[],s=0;s<n.length;s++)"string"!=typeof n[s]&&a.push(n[s]);return o.keys=a,o},t}(),a=function(){function t(){}return t.listen=function(t){if(this._listening)throw new Error("Router already listening.");return this._listening=!0,this.config(t),"history"===this._options.mode?e.addEventListener("popstate",this._loadCurrent,!1):e.addEventListener("hashchange",this._loadCurrent,!1),this},t.config=function(t){for(var e in r)void 0!==t[e]?this._options[e]=t[e]:void 0===this._options[e]&&(this._options[e]=r[e]);return this},t.reset=function(){return"history"===this._options.mode?(e.removeEventListener("popstate",this._loadCurrent,!1),e.history.pushState(null,null,this._options.root)):(e.removeEventListener("hashchange",this._loadCurrent,!1),e.location.hash="#"),this._handlers=[],this._listening=!1,this},t.use=function(t,e){var r;"function"==typeof t?(e=t,r=/.*/):(t=o.clearSlashes(t),r=o.stringToPathExp(t)),this._handlers.push({path:r,activate:e})},t.getCurrent=function(){var t,r=this._options.mode,n=this._options.root;if("history"===r)t=o.clearSlashes(e.decodeURI(e.location.pathname+e.location.search)),t=t.replace(/\?(.*)$/,""),t="/"!==n?t.replace(n,""):t;else{var a=e.location.href.match(/#(.*)$/);t=a?a[1]:""}return t=o.clearSlashes(t)},t.navigate=function(t){t=o.clearSlashes(t);var r=this._options.mode;switch(r){case"history":this._load(t),e.history.pushState(null,null,this._options.root+t);break;case"hash":var n=this.getCurrent();t===n&&this._load(t),e.location.hash="#"+t}return this},t._loadCurrent=function(){var t=this.getCurrent();return this._load(t)},t._load=function(t){for(var e=this._obtainNodeRoutes(t),r=e.length,n=this.getCurrent(),o=0,a=0;r>a;a++){var s=e[a];s.request.old=n;var i=s.activate.call(null,s.request);if(i===!1)break;o++}return o>0},t._obtainNodeRoutes=function(t){for(var e=o.parsePath(t),r=[],n=0;n<this._handlers.length;n++){var a=this._handlers[n],s=e.path.match(a.path);if(s){var i=o.extractRequest(t,a.path),h={activate:a.activate,request:i};r.push(h)}}return r},t._handlers=[],t._options={},t._listening=!1,t}();t.Router=a;var s=function(){function t(){this._handlers=[],this.use=a.use}return t}();t.RouteGroup=s}(n||(n={})),n});